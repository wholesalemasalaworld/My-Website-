<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wholesale Masala World</title>
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        body { background: #fff; color: #1a2a33; font-family: sans-serif; }
        .hidden { display: none !important; }
        header { background: #1a2a33; color: #f1c40f; padding: 15px; text-align: center; position: sticky; top: 0; z-index: 100; }
        .container { max-width: 500px; margin: auto; padding: 10px; }
        
        /* Product Card */
        .product-card { border: 1px solid #eee; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); overflow: hidden; background: #fff; }
        .img-box { position: relative; width: 100%; height: 220px; background: #f4f4f4; display: flex; overflow-x: auto; scroll-snap-type: x mandatory; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; flex-shrink: 0; scroll-snap-align: start; min-width: 100%; }
        
        .details { padding: 12px; }
        .p-name { color: #ff4d4d; font-size: 1.2rem; font-weight: bold; }
        .p-price { color: #58d68d; font-size: 1.3rem; font-weight: bold; margin: 5px 0; }
        
        select, input, textarea { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #00bcd4; border-radius: 8px; font-size: 16px; }
        .btn { background: #1a2a33; color: #fff; border: none; padding: 12px; border-radius: 8px; width: 100%; font-weight: bold; cursor: pointer; }
        .btn-buy { background: #58d68d; padding: 15px; font-size: 1.1rem; margin-top: 10px; color: #000; }
        
        /* Floating Cart */
        .cart-bar { position: fixed; bottom: 15px; right: 15px; background: #00bcd4; color: #fff; padding: 12px 20px; border-radius: 50px; font-weight: bold; z-index: 99; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        #cart-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 200; overflow-y: auto; padding: 15px; }
        .bank-info { background: #f0fbff; border: 1px solid #00bcd4; padding: 15px; border-radius: 10px; }
        .scroll-hint { font-size: 0.7rem; color: #888; text-align: center; margin: 5px 0; }
    </style>
</head>
<body>

<header><h1>Wholesale Masala World</h1></header>

<div class="cart-bar" id="cartBtn" onclick="openCart()">üõí <span id="count">0</span> Items | Checkout</div>

<div class="container" id="main-view">
    <div id="masala-list">
        <p id="loading-text" style="text-align:center; margin-top:20px; color:#888;">Website Loading...</p>
    </div>
</div>

<div id="cart-modal" class="hidden">
    <button onclick="closeCartModal()" style="background:none; border:none; color:#00bcd4; font-size:1rem; padding:10px 0;">‚Üê Back</button>
    <h2 style="margin:10px 0;">Order Details</h2>
    <div id="items-list"></div>
    <h3 style="text-align:right; margin:15px 0; border-top:1px solid #eee; padding-top:10px;">Total: ‚Çπ<span id="total">0</span></h3>
    
    <form id="orderForm">
        <input type="text" id="custName" placeholder="Full Name" required>
        <textarea id="custAddr" placeholder="Delivery Address" rows="2" required></textarea>
        <input type="text" id="custPin" placeholder="Pincode" pattern="[0-9]{6}" required>
        
        <div class="bank-info">
            <input list="indian-banks" id="bankName" placeholder="Search Bank Name">
            <datalist id="indian-banks">
                <option value="State Bank of India"><option value="HDFC Bank"><option value="ICICI Bank"><option value="Bank of Baroda">
            </datalist>
            <input type="text" id="accHolder" placeholder="Account Holder Name">
            <input type="text" id="accNum" placeholder="Account Number">
            <input type="text" id="ifsc" placeholder="IFSC Code">
        </div>
        <button type="submit" id="submitBtn" class="btn btn-buy">Order on WhatsApp</button>
    </form>
</div>

<script>
    const products = [
        { name: "Shahi Jeera", mrp: 850, imgs: ["https://i.ibb.co/NgL1xGhX/shahi-jeera-1.jpg", "https://i.ibb.co/JRdKZzNR/shahi-jeera-2.jpg"] },
        { name: "Premium Loang", mrp: 1100, imgs: ["https://images.unsplash.com/photo-1615485290382-441e4d049cb5?w=400"] },
        { name: "Green Elaichi", mrp: 3200, imgs: ["https://images.unsplash.com/photo-1601004890684-d8cbf643f5f2?w=400"] }
    ];

    let cart = [];

    function renderProducts() {
        const list = document.getElementById('masala-list');
        const loading = document.getElementById('loading-text');
        if(loading) loading.remove();
        
        list.innerHTML = ""; 
        products.forEach((p, idx) => {
            let sale = Math.round(p.mrp * 0.65);
            let imgHTML = p.imgs.map(s => `<img src="${s}" onerror="this.src='https://via.placeholder.com/400x220?text=Photo+Coming+Soon'">`).join('');
            
            list.innerHTML += `
                <div class="product-card">
                    <div class="img-box">${imgHTML}</div>
                    <p class="scroll-hint">‚Üî Swipe for photos</p>
                    <div class="details">
                        <p class="p-name">${p.name}</p>
                        <p class="p-price">‚Çπ${sale}/kg</p>
                        <select id="qty-${idx}"><option value="6">6kg</option><option value="10">10kg</option></select>
                        <button class="btn" onclick="add(${idx})">Add to Order</button>
                    </div>
                </div>`;
        });
    }

    function add(idx) {
        const qty = document.getElementById(`qty-${idx}`).value;
        const p = products[idx];
        cart.push({ n: p.name, q: qty, t: Math.round(p.mrp * 0.65) * qty });
        document.getElementById('count').innerText = cart.length;
        alert(p.name + " Added!");
    }

    function openCart() {
        if(cart.length === 0) return alert("Select items first!");
        document.getElementById('cart-modal').classList.remove('hidden');
        let h = ""; let t = 0;
        cart.forEach((i, idx) => { h += `<p style="margin-bottom:8px;">‚úÖ ${i.n} (${i.q}kg) <span onclick="del(${idx})" style="color:red; float:right;">‚úñ</span></p>`; t += i.t; });
        document.getElementById('items-list').innerHTML = h;
        document.getElementById('total').innerText = t;
    }

    function del(idx) { cart.splice(idx,1); if(!cart.length) closeCartModal(); else openCart(); document.getElementById('count').innerText = cart.length; }
    function closeCartModal() { document.getElementById('cart-modal').classList.add('hidden'); }

    document.getElementById('orderForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const btn = document.getElementById('submitBtn');
        btn.innerText = "Processing..."; btn.disabled = true;

        const data = {
            Name: document.getElementById('custName').value,
            Address: document.getElementById('custAddr').value,
            Order: cart.map(i => `${i.n}(${i.q}kg)`).join(', '),
            Total: document.getElementById('total').innerText
        };

        fetch('https://formspree.io/f/xrelkgbz', {
            method: 'POST',
            body: JSON.stringify(data),
            headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' }
        }).then(() => {
            const msg = encodeURIComponent(`Naya Order!\nNaam: ${data.Name}\nTotal: ‚Çπ${data.Total}`);
            window.location.href = `https://wa.me/918460722331?text=${msg}`;
        });
    });

    window.onload = renderProducts;
</script>
</body>
</html>
