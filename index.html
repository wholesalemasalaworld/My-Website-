<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wholesale Masala World | Cart System</title>
    <style>
        body { background: radial-gradient(circle at top, #1a2a33 0%, #0d1418 100%); color: white; font-family: sans-serif; margin: 0; padding: 20px; text-align: center; }
        .hidden { display: none; }
        .container { max-width: 800px; margin: auto; background: rgba(28, 41, 51, 0.95); padding: 20px; border-radius: 15px; border: 1px solid #00bcd4; box-shadow: 0 10px 30px rgba(0,0,0,0.5); margin-bottom: 20px; }
        h1 { color: #f1c40f; text-shadow: 2px 2px #000; }
        
        /* Product Grid */
        .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .product-card { background: rgba(255,255,255,0.05); border: 1px solid #00bcd4; border-radius: 12px; padding: 15px; text-align: left; }
        .product-img { width: 100%; height: 180px; object-fit: cover; border-radius: 8px; margin-bottom: 10px; }
        
        /* Cart Sidebar/Section */
        .cart-container { position: fixed; top: 20px; right: 20px; background: #f1c40f; color: #000; padding: 10px 20px; border-radius: 50px; font-weight: bold; cursor: pointer; z-index: 1000; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .cart-modal { background: #122d33; border: 2px solid #00bcd4; padding: 20px; border-radius: 15px; margin-top: 20px; text-align: left; }
        
        input, select, textarea { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #00bcd4; background: #0b1418; color: white; box-sizing: border-box; }
        .btn-add { background: #00bcd4; color: #000; border: none; padding: 10px; border-radius: 5px; width: 100%; font-weight: bold; cursor: pointer; }
        .btn-buy { background: #58d68d; color: #000; border: none; padding: 15px; border-radius: 8px; width: 100%; font-weight: bold; cursor: pointer; font-size: 18px; }
        
        .mrp { text-decoration: line-through; color: #ff4d4d; font-size: 12px; }
        .price { color: #58d68d; font-size: 18px; font-weight: bold; }
        #qr-display img { width: 180px; height: 180px; border: 4px solid white; margin: 10px 0; }
    </style>
</head>
<body onload="renderProducts()">

    <div class="cart-container" onclick="showCartSection()">
        üõí Cart: <span id="cart-count">0</span> Items
    </div>

    <h1>Wholesale Masala World</h1>
    <p style="color: #00bcd4;">Premium Quality Spices at Wholesale Rates</p>

    <div id="catalog-page">
        <div class="product-grid" id="product-list"></div>
    </div>

    <div id="cart-section" class="container hidden">
        <h2 style="color: #f1c40f;">Your Shopping Cart</h2>
        <div id="cart-items-list"></div>
        <hr border="1" color="#00bcd4">
        <h3 style="text-align: right;">Total Amount: ‚Çπ<span id="total-price">0</span></h3>
        
        <form action="https://formspree.io/f/xrelkgbz" method="POST" onsubmit="return handleOrder(event)">
            <input type="hidden" name="Order_Details" id="hidden-order-data">
            <input type="hidden" name="Total_Bill" id="hidden-total-bill">

            <input type="text" name="Name" placeholder="Full Name" required>
            <textarea name="Address" placeholder="Full Delivery Address" required></textarea>
            <input type="text" name="Pincode" placeholder="Pin Code" required>

            <select name="Payment" id="pay-method" onchange="toggleQR()" required>
                <option value="">Select Payment Method</option>
                <option value="UPI">Full UPI Payment (QR Code)</option>
                <option value="COD">COD (30% Advance Mandatory)</option>
            </select>

            <div id="qr-box" class="hidden" style="text-align: center;">
                <p style="color:#f1c40f">Scan to Pay Advance/Full Amount</p>
                <img src="https://via.placeholder.com/200?text=Your+QR+Code" alt="QR Code">
                <input type="text" name="UTR_Number" placeholder="Enter UTR / Transaction ID">
            </div>

            <button type="submit" class="btn-buy">Place Order on WhatsApp</button>
            <button type="button" onclick="hideCartSection()" style="background: none; color: white; border: none; cursor: pointer; margin-top: 10px;">‚Üê Back to Shopping</button>
        </form>
    </div>

    <script>
        const products = [
            { id: 1, name: "Premium Jeera", mrp: 750, img: "https://via.placeholder.com/300x180?text=Jeera" },
            { id: 2, name: "Shahi Loang", mrp: 1100, img: "https://via.placeholder.com/300x180?text=Loang" },
            { id: 3, name: "Black Pepper", mrp: 950, img: "https://via.placeholder.com/300x180?text=Pepper" },
            { id: 4, name: "Elaichi Green", mrp: 3200, img: "https://via.placeholder.com/300x180?text=Elaichi" }
        ];

        let cart = [];
        const discount = 0.35; // 35% Off

        function renderProducts() {
            const list = document.getElementById('product-list');
            products.forEach(p => {
                let salePrice = p.mrp - (p.mrp * discount);
                list.innerHTML += `
                    <div class="product-card">
                        <img src="${p.img}" class="product-img">
                        <h3 style="color:#ff4d4d; margin:5px 0;">${p.name}</h3>
                        <p class="mrp">MRP: ‚Çπ${p.mrp}/kg</p>
                        <p class="price">Wholesale: ‚Çπ${salePrice.toFixed(0)}/kg</p>
                        <select id="qty-${p.id}">
                            <option value="6">6 KG (Min)</option>
                            <option value="10">10 KG</option>
                            <option value="15">15 KG</option>
                        </select>
                        <button class="btn-add" onclick="addToCart(${p.id})">Add to Cart</button>
                    </div>`;
            });
        }

        function addToCart(id) {
            const product = products.find(p => p.id === id);
            const qty = document.getElementById(`qty-${id}`).value;
            const salePrice = product.mrp - (product.mrp * discount);
            
            cart.push({ name: product.name, qty: qty, price: (salePrice * qty).toFixed(0) });
            updateCartCount();
            alert(`${product.name} added to cart!`);
        }

        function updateCartCount() {
            document.getElementById('cart-count').innerText = cart.length;
        }

        function showCartSection() {
            if(cart.length === 0) { alert("Cart is empty!"); return; }
            document.getElementById('catalog-page').classList.add('hidden');
            document.getElementById('cart-section').classList.remove('hidden');
            
            let itemsHtml = "";
            let total = 0;
            cart.forEach((item, index) => {
                itemsHtml += `<p>‚úÖ ${item.name} - ${item.qty}kg (‚Çπ${item.price}) <button onclick="removeItem(${index})" style="color:red; background:none; border:none; cursor:pointer;">‚úñ</button></p>`;
                total += parseInt(item.price);
            });
            document.getElementById('cart-items-list').innerHTML = itemsHtml;
            document.getElementById('total-price').innerText = total;
            document.getElementById('hidden-total-bill').value = total;
            document.getElementById('hidden-order-data').value = JSON.stringify(cart);
        }

        function removeItem(index) {
            cart.splice(index, 1);
            if(cart.length === 0) hideCartSection();
            else showCartSection();
            updateCartCount();
        }

        function hideCartSection() {
            document.getElementById('catalog-page').classList.remove('hidden');
            document.getElementById('cart-section').classList.add('hidden');
        }

        function toggleQR() {
            const method = document.getElementById('pay-method').value;
            document.getElementById('qr-box').classList.toggle('hidden', method === "");
        }

        function handleOrder(e) {
            const name = document.querySelector('input[name="Name"]').value;
            const total = document.getElementById('total-price').innerText;
            const msg = `New Order from ${name}: Total Bill ‚Çπ${total}. Check Email for full list.`;
            
            setTimeout(() => {
                window.location.href = `https://wa.me/918460722331?text=${encodeURIComponent(msg)}`;
            }, 1000);
            return true; 
        }
    </script>
</body>
</html>
